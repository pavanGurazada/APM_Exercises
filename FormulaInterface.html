<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="data:text/css;charset=utf-8,%0A%40font%2Dface%20%7B%0Afont%2Dfamily%3A%20octicons%2Dlink%3B%0Asrc%3A%20url%28data%3Afont%2Fwoff%3Bcharset%3Dutf%2D8%3Bbase64%2Cd09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM%2B8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB%2FaFGpk3jaTY6xa8JAGMW%2FO62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v%2Bk%2F0an2i%2BitHDw3v2%2B9%2BDBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3%2FI7AtxEJLtzzuZfI%2BVVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy%2FLt7Kc%2B0vWY%2FgAgIIEqAN9we0pwKXreiMasxvabDQMM4riO%2BqxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw%2Bymhce7vwM9jSqO8JyVd5RH9gyTt2%2BJ%2FyUmYlIR0s04n6%2B7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv%2FocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi%2BW2%2BMjCzMIDApSwvXzC97Z4Ig8N%2FBxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh%2F8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT%2BAEjAwuDFpBmA9KMDEwMCh9i%2Fv8H8sH0%2F4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9%2FlqYwOGZxeUelN2U2R6%2BcArgtCJpauW7UQBqnFkUsjAY%2FkOU1cP%2BDAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl%2BvvmM%2FbyA48e6tWrKArm4ZJlCbdsrxksL1AwWn%2FyBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO%2F%2FsdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd%2F89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF%2B9JOS0nbaaYDCQfwCJ7Au3AHj%2BLO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm%2BEBXuAbHmIMSRMs%2B4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL%2BhD7C1xoaHeLJSEao0FEW14ckxC%2BTU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13%2F%2Blm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl%2B9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O%2FAdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB%2F%2F%2FAA8AAQAAAAAAAAAAAAAAAAABAAAAAA%3D%3D%29%20format%28%27woff%27%29%3B%0A%7D%0Abody%20%7B%0A%2Dwebkit%2Dtext%2Dsize%2Dadjust%3A%20100%25%3B%0Atext%2Dsize%2Dadjust%3A%20100%25%3B%0Acolor%3A%20%23333%3B%0Afont%2Dfamily%3A%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20%22Segoe%20UI%22%2C%20Arial%2C%20freesans%2C%20sans%2Dserif%2C%20%22Apple%20Color%20Emoji%22%2C%20%22Segoe%20UI%20Emoji%22%2C%20%22Segoe%20UI%20Symbol%22%3B%0Afont%2Dsize%3A%2016px%3B%0Aline%2Dheight%3A%201%2E6%3B%0Aword%2Dwrap%3A%20break%2Dword%3B%0A%7D%0Aa%20%7B%0Abackground%2Dcolor%3A%20transparent%3B%0A%7D%0Aa%3Aactive%2C%0Aa%3Ahover%20%7B%0Aoutline%3A%200%3B%0A%7D%0Astrong%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Ah1%20%7B%0Afont%2Dsize%3A%202em%3B%0Amargin%3A%200%2E67em%200%3B%0A%7D%0Aimg%20%7B%0Aborder%3A%200%3B%0A%7D%0Ahr%20%7B%0Abox%2Dsizing%3A%20content%2Dbox%3B%0Aheight%3A%200%3B%0A%7D%0Apre%20%7B%0Aoverflow%3A%20auto%3B%0A%7D%0Acode%2C%0Akbd%2C%0Apre%20%7B%0Afont%2Dfamily%3A%20monospace%2C%20monospace%3B%0Afont%2Dsize%3A%201em%3B%0A%7D%0Ainput%20%7B%0Acolor%3A%20inherit%3B%0Afont%3A%20inherit%3B%0Amargin%3A%200%3B%0A%7D%0Ahtml%20input%5Bdisabled%5D%20%7B%0Acursor%3A%20default%3B%0A%7D%0Ainput%20%7B%0Aline%2Dheight%3A%20normal%3B%0A%7D%0Ainput%5Btype%3D%22checkbox%22%5D%20%7B%0Abox%2Dsizing%3A%20border%2Dbox%3B%0Apadding%3A%200%3B%0A%7D%0Atable%20%7B%0Aborder%2Dcollapse%3A%20collapse%3B%0Aborder%2Dspacing%3A%200%3B%0A%7D%0Atd%2C%0Ath%20%7B%0Apadding%3A%200%3B%0A%7D%0A%2A%20%7B%0Abox%2Dsizing%3A%20border%2Dbox%3B%0A%7D%0Ainput%20%7B%0Afont%3A%2013px%20%2F%201%2E4%20Helvetica%2C%20arial%2C%20nimbussansl%2C%20liberationsans%2C%20freesans%2C%20clean%2C%20sans%2Dserif%2C%20%22Apple%20Color%20Emoji%22%2C%20%22Segoe%20UI%20Emoji%22%2C%20%22Segoe%20UI%20Symbol%22%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%234078c0%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%2C%0Aa%3Aactive%20%7B%0Atext%2Ddecoration%3A%20underline%3B%0A%7D%0Ahr%20%7B%0Aheight%3A%200%3B%0Amargin%3A%2015px%200%3B%0Aoverflow%3A%20hidden%3B%0Abackground%3A%20transparent%3B%0Aborder%3A%200%3B%0Aborder%2Dbottom%3A%201px%20solid%20%23ddd%3B%0A%7D%0Ahr%3Abefore%20%7B%0Adisplay%3A%20table%3B%0Acontent%3A%20%22%22%3B%0A%7D%0Ahr%3Aafter%20%7B%0Adisplay%3A%20table%3B%0Aclear%3A%20both%3B%0Acontent%3A%20%22%22%3B%0A%7D%0Ah1%2C%0Ah2%2C%0Ah3%2C%0Ah4%2C%0Ah5%2C%0Ah6%20%7B%0Amargin%2Dtop%3A%2015px%3B%0Amargin%2Dbottom%3A%2015px%3B%0Aline%2Dheight%3A%201%2E1%3B%0A%7D%0Ah1%20%7B%0Afont%2Dsize%3A%2030px%3B%0A%7D%0Ah2%20%7B%0Afont%2Dsize%3A%2021px%3B%0A%7D%0Ah3%20%7B%0Afont%2Dsize%3A%2016px%3B%0A%7D%0Ah4%20%7B%0Afont%2Dsize%3A%2014px%3B%0A%7D%0Ah5%20%7B%0Afont%2Dsize%3A%2012px%3B%0A%7D%0Ah6%20%7B%0Afont%2Dsize%3A%2011px%3B%0A%7D%0Ablockquote%20%7B%0Amargin%3A%200%3B%0A%7D%0Aul%2C%0Aol%20%7B%0Apadding%3A%200%3B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Aol%20ol%2C%0Aul%20ol%20%7B%0Alist%2Dstyle%2Dtype%3A%20lower%2Droman%3B%0A%7D%0Aul%20ul%20ol%2C%0Aul%20ol%20ol%2C%0Aol%20ul%20ol%2C%0Aol%20ol%20ol%20%7B%0Alist%2Dstyle%2Dtype%3A%20lower%2Dalpha%3B%0A%7D%0Add%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20%22Liberation%20Mono%22%2C%20Menlo%2C%20Courier%2C%20monospace%3B%0Afont%2Dsize%3A%2012px%3B%0A%7D%0Apre%20%7B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dbottom%3A%200%3B%0Afont%3A%2012px%20Consolas%2C%20%22Liberation%20Mono%22%2C%20Menlo%2C%20Courier%2C%20monospace%3B%0A%7D%0A%2Eselect%3A%3A%2Dms%2Dexpand%20%7B%0Aopacity%3A%200%3B%0A%7D%0A%2Eocticon%20%7B%0Afont%3A%20normal%20normal%20normal%2016px%2F1%20octicons%2Dlink%3B%0Adisplay%3A%20inline%2Dblock%3B%0Atext%2Ddecoration%3A%20none%3B%0Atext%2Drendering%3A%20auto%3B%0A%2Dwebkit%2Dfont%2Dsmoothing%3A%20antialiased%3B%0A%2Dmoz%2Dosx%2Dfont%2Dsmoothing%3A%20grayscale%3B%0A%2Dwebkit%2Duser%2Dselect%3A%20none%3B%0A%2Dmoz%2Duser%2Dselect%3A%20none%3B%0A%2Dms%2Duser%2Dselect%3A%20none%3B%0Auser%2Dselect%3A%20none%3B%0A%7D%0A%2Eocticon%2Dlink%3Abefore%20%7B%0Acontent%3A%20%27%5Cf05c%27%3B%0A%7D%0A%2Emarkdown%2Dbody%3Abefore%20%7B%0Adisplay%3A%20table%3B%0Acontent%3A%20%22%22%3B%0A%7D%0A%2Emarkdown%2Dbody%3Aafter%20%7B%0Adisplay%3A%20table%3B%0Aclear%3A%20both%3B%0Acontent%3A%20%22%22%3B%0A%7D%0A%2Emarkdown%2Dbody%3E%2A%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%20%21important%3B%0A%7D%0A%2Emarkdown%2Dbody%3E%2A%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%20%21important%3B%0A%7D%0Aa%3Anot%28%5Bhref%5D%29%20%7B%0Acolor%3A%20inherit%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0A%2Eanchor%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0Apadding%2Dright%3A%202px%3B%0Amargin%2Dleft%3A%20%2D18px%3B%0A%7D%0A%2Eanchor%3Afocus%20%7B%0Aoutline%3A%20none%3B%0A%7D%0Ah1%2C%0Ah2%2C%0Ah3%2C%0Ah4%2C%0Ah5%2C%0Ah6%20%7B%0Amargin%2Dtop%3A%201em%3B%0Amargin%2Dbottom%3A%2016px%3B%0Afont%2Dweight%3A%20bold%3B%0Aline%2Dheight%3A%201%2E4%3B%0A%7D%0Ah1%20%2Eocticon%2Dlink%2C%0Ah2%20%2Eocticon%2Dlink%2C%0Ah3%20%2Eocticon%2Dlink%2C%0Ah4%20%2Eocticon%2Dlink%2C%0Ah5%20%2Eocticon%2Dlink%2C%0Ah6%20%2Eocticon%2Dlink%20%7B%0Acolor%3A%20%23000%3B%0Avertical%2Dalign%3A%20middle%3B%0Avisibility%3A%20hidden%3B%0A%7D%0Ah1%3Ahover%20%2Eanchor%2C%0Ah2%3Ahover%20%2Eanchor%2C%0Ah3%3Ahover%20%2Eanchor%2C%0Ah4%3Ahover%20%2Eanchor%2C%0Ah5%3Ahover%20%2Eanchor%2C%0Ah6%3Ahover%20%2Eanchor%20%7B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Ah1%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah2%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah3%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah4%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah5%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%2C%0Ah6%3Ahover%20%2Eanchor%20%2Eocticon%2Dlink%20%7B%0Avisibility%3A%20visible%3B%0A%7D%0Ah1%20%7B%0Apadding%2Dbottom%3A%200%2E3em%3B%0Afont%2Dsize%3A%202%2E25em%3B%0Aline%2Dheight%3A%201%2E2%3B%0Aborder%2Dbottom%3A%201px%20solid%20%23eee%3B%0A%7D%0Ah1%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%3B%0A%7D%0Ah2%20%7B%0Apadding%2Dbottom%3A%200%2E3em%3B%0Afont%2Dsize%3A%201%2E75em%3B%0Aline%2Dheight%3A%201%2E225%3B%0Aborder%2Dbottom%3A%201px%20solid%20%23eee%3B%0A%7D%0Ah2%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%3B%0A%7D%0Ah3%20%7B%0Afont%2Dsize%3A%201%2E5em%3B%0Aline%2Dheight%3A%201%2E43%3B%0A%7D%0Ah3%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%2E2%3B%0A%7D%0Ah4%20%7B%0Afont%2Dsize%3A%201%2E25em%3B%0A%7D%0Ah4%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%2E2%3B%0A%7D%0Ah5%20%7B%0Afont%2Dsize%3A%201em%3B%0A%7D%0Ah5%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%2E1%3B%0A%7D%0Ah6%20%7B%0Afont%2Dsize%3A%201em%3B%0Acolor%3A%20%23777%3B%0A%7D%0Ah6%20%2Eanchor%20%7B%0Aline%2Dheight%3A%201%2E1%3B%0A%7D%0Ap%2C%0Ablockquote%2C%0Aul%2C%0Aol%2C%0Adl%2C%0Atable%2C%0Apre%20%7B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dbottom%3A%2016px%3B%0A%7D%0Ahr%20%7B%0Aheight%3A%204px%3B%0Apadding%3A%200%3B%0Amargin%3A%2016px%200%3B%0Abackground%2Dcolor%3A%20%23e7e7e7%3B%0Aborder%3A%200%20none%3B%0A%7D%0Aul%2C%0Aol%20%7B%0Apadding%2Dleft%3A%202em%3B%0A%7D%0Aul%20ul%2C%0Aul%20ol%2C%0Aol%20ol%2C%0Aol%20ul%20%7B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Ali%3Ep%20%7B%0Amargin%2Dtop%3A%2016px%3B%0A%7D%0Adl%20%7B%0Apadding%3A%200%3B%0A%7D%0Adl%20dt%20%7B%0Apadding%3A%200%3B%0Amargin%2Dtop%3A%2016px%3B%0Afont%2Dsize%3A%201em%3B%0Afont%2Dstyle%3A%20italic%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Adl%20dd%20%7B%0Apadding%3A%200%2016px%3B%0Amargin%2Dbottom%3A%2016px%3B%0A%7D%0Ablockquote%20%7B%0Apadding%3A%200%2015px%3B%0Acolor%3A%20%23777%3B%0Aborder%2Dleft%3A%204px%20solid%20%23ddd%3B%0A%7D%0Ablockquote%3E%3Afirst%2Dchild%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Ablockquote%3E%3Alast%2Dchild%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Atable%20%7B%0Adisplay%3A%20block%3B%0Awidth%3A%20100%25%3B%0Aoverflow%3A%20auto%3B%0Aword%2Dbreak%3A%20normal%3B%0Aword%2Dbreak%3A%20keep%2Dall%3B%0A%7D%0Atable%20th%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Atable%20th%2C%0Atable%20td%20%7B%0Apadding%3A%206px%2013px%3B%0Aborder%3A%201px%20solid%20%23ddd%3B%0A%7D%0Atable%20tr%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Aborder%2Dtop%3A%201px%20solid%20%23ccc%3B%0A%7D%0Atable%20tr%3Anth%2Dchild%282n%29%20%7B%0Abackground%2Dcolor%3A%20%23f8f8f8%3B%0A%7D%0Aimg%20%7B%0Amax%2Dwidth%3A%20100%25%3B%0Abox%2Dsizing%3A%20content%2Dbox%3B%0Abackground%2Dcolor%3A%20%23fff%3B%0A%7D%0Acode%20%7B%0Apadding%3A%200%3B%0Apadding%2Dtop%3A%200%2E2em%3B%0Apadding%2Dbottom%3A%200%2E2em%3B%0Amargin%3A%200%3B%0Afont%2Dsize%3A%2085%25%3B%0Abackground%2Dcolor%3A%20rgba%280%2C0%2C0%2C0%2E04%29%3B%0Aborder%2Dradius%3A%203px%3B%0A%7D%0Acode%3Abefore%2C%0Acode%3Aafter%20%7B%0Aletter%2Dspacing%3A%20%2D0%2E2em%3B%0Acontent%3A%20%22%5C00a0%22%3B%0A%7D%0Apre%3Ecode%20%7B%0Apadding%3A%200%3B%0Amargin%3A%200%3B%0Afont%2Dsize%3A%20100%25%3B%0Aword%2Dbreak%3A%20normal%3B%0Awhite%2Dspace%3A%20pre%3B%0Abackground%3A%20transparent%3B%0Aborder%3A%200%3B%0A%7D%0A%2Ehighlight%20%7B%0Amargin%2Dbottom%3A%2016px%3B%0A%7D%0A%2Ehighlight%20pre%2C%0Apre%20%7B%0Apadding%3A%2016px%3B%0Aoverflow%3A%20auto%3B%0Afont%2Dsize%3A%2085%25%3B%0Aline%2Dheight%3A%201%2E45%3B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0A%7D%0A%2Ehighlight%20pre%20%7B%0Amargin%2Dbottom%3A%200%3B%0Aword%2Dbreak%3A%20normal%3B%0A%7D%0Apre%20%7B%0Aword%2Dwrap%3A%20normal%3B%0A%7D%0Apre%20code%20%7B%0Adisplay%3A%20inline%3B%0Amax%2Dwidth%3A%20initial%3B%0Apadding%3A%200%3B%0Amargin%3A%200%3B%0Aoverflow%3A%20initial%3B%0Aline%2Dheight%3A%20inherit%3B%0Aword%2Dwrap%3A%20normal%3B%0Abackground%2Dcolor%3A%20transparent%3B%0Aborder%3A%200%3B%0A%7D%0Apre%20code%3Abefore%2C%0Apre%20code%3Aafter%20%7B%0Acontent%3A%20normal%3B%0A%7D%0Akbd%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0Apadding%3A%203px%205px%3B%0Afont%2Dsize%3A%2011px%3B%0Aline%2Dheight%3A%2010px%3B%0Acolor%3A%20%23555%3B%0Avertical%2Dalign%3A%20middle%3B%0Abackground%2Dcolor%3A%20%23fcfcfc%3B%0Aborder%3A%20solid%201px%20%23ccc%3B%0Aborder%2Dbottom%2Dcolor%3A%20%23bbb%3B%0Aborder%2Dradius%3A%203px%3B%0Abox%2Dshadow%3A%20inset%200%20%2D1px%200%20%23bbb%3B%0A%7D%0A%2Epl%2Dc%20%7B%0Acolor%3A%20%23969896%3B%0A%7D%0A%2Epl%2Dc1%2C%0A%2Epl%2Ds%20%2Epl%2Dv%20%7B%0Acolor%3A%20%230086b3%3B%0A%7D%0A%2Epl%2De%2C%0A%2Epl%2Den%20%7B%0Acolor%3A%20%23795da3%3B%0A%7D%0A%2Epl%2Ds%20%2Epl%2Ds1%2C%0A%2Epl%2Dsmi%20%7B%0Acolor%3A%20%23333%3B%0A%7D%0A%2Epl%2Dent%20%7B%0Acolor%3A%20%2363a35c%3B%0A%7D%0A%2Epl%2Dk%20%7B%0Acolor%3A%20%23a71d5d%3B%0A%7D%0A%2Epl%2Dpds%2C%0A%2Epl%2Ds%2C%0A%2Epl%2Ds%20%2Epl%2Dpse%20%2Epl%2Ds1%2C%0A%2Epl%2Dsr%2C%0A%2Epl%2Dsr%20%2Epl%2Dcce%2C%0A%2Epl%2Dsr%20%2Epl%2Dsra%2C%0A%2Epl%2Dsr%20%2Epl%2Dsre%20%7B%0Acolor%3A%20%23183691%3B%0A%7D%0A%2Epl%2Dv%20%7B%0Acolor%3A%20%23ed6a43%3B%0A%7D%0A%2Epl%2Did%20%7B%0Acolor%3A%20%23b52a1d%3B%0A%7D%0A%2Epl%2Dii%20%7B%0Abackground%2Dcolor%3A%20%23b52a1d%3B%0Acolor%3A%20%23f8f8f8%3B%0A%7D%0A%2Epl%2Dsr%20%2Epl%2Dcce%20%7B%0Acolor%3A%20%2363a35c%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0A%2Epl%2Dml%20%7B%0Acolor%3A%20%23693a17%3B%0A%7D%0A%2Epl%2Dmh%2C%0A%2Epl%2Dmh%20%2Epl%2Den%2C%0A%2Epl%2Dms%20%7B%0Acolor%3A%20%231d3e81%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0A%2Epl%2Dmq%20%7B%0Acolor%3A%20%23008080%3B%0A%7D%0A%2Epl%2Dmi%20%7B%0Acolor%3A%20%23333%3B%0Afont%2Dstyle%3A%20italic%3B%0A%7D%0A%2Epl%2Dmb%20%7B%0Acolor%3A%20%23333%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0A%2Epl%2Dmd%20%7B%0Abackground%2Dcolor%3A%20%23ffecec%3B%0Acolor%3A%20%23bd2c00%3B%0A%7D%0A%2Epl%2Dmi1%20%7B%0Abackground%2Dcolor%3A%20%23eaffea%3B%0Acolor%3A%20%2355a532%3B%0A%7D%0A%2Epl%2Dmdr%20%7B%0Acolor%3A%20%23795da3%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0A%2Epl%2Dmo%20%7B%0Acolor%3A%20%231d3e81%3B%0A%7D%0Akbd%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0Apadding%3A%203px%205px%3B%0Afont%3A%2011px%20Consolas%2C%20%22Liberation%20Mono%22%2C%20Menlo%2C%20Courier%2C%20monospace%3B%0Aline%2Dheight%3A%2010px%3B%0Acolor%3A%20%23555%3B%0Avertical%2Dalign%3A%20middle%3B%0Abackground%2Dcolor%3A%20%23fcfcfc%3B%0Aborder%3A%20solid%201px%20%23ccc%3B%0Aborder%2Dbottom%2Dcolor%3A%20%23bbb%3B%0Aborder%2Dradius%3A%203px%3B%0Abox%2Dshadow%3A%20inset%200%20%2D1px%200%20%23bbb%3B%0A%7D%0A%2Etask%2Dlist%2Ditem%20%7B%0Alist%2Dstyle%2Dtype%3A%20none%3B%0A%7D%0A%2Etask%2Dlist%2Ditem%2B%2Etask%2Dlist%2Ditem%20%7B%0Amargin%2Dtop%3A%203px%3B%0A%7D%0A%2Etask%2Dlist%2Ditem%20input%20%7B%0Amargin%3A%200%200%2E35em%200%2E25em%20%2D1%2E6em%3B%0Avertical%2Dalign%3A%20middle%3B%0A%7D%0A%3Achecked%2B%2Eradio%2Dlabel%20%7B%0Az%2Dindex%3A%201%3B%0Aposition%3A%20relative%3B%0Aborder%2Dcolor%3A%20%234078c0%3B%0A%7D%0A%2EsourceLine%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0A%7D%0Acode%20%2Ekw%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Edt%20%7B%20color%3A%20%23ed6a43%3B%20%7D%0Acode%20%2Edv%20%7B%20color%3A%20%23009999%3B%20%7D%0Acode%20%2Ebn%20%7B%20color%3A%20%23009999%3B%20%7D%0Acode%20%2Efl%20%7B%20color%3A%20%23009999%3B%20%7D%0Acode%20%2Ech%20%7B%20color%3A%20%23009999%3B%20%7D%0Acode%20%2Est%20%7B%20color%3A%20%23183691%3B%20%7D%0Acode%20%2Eco%20%7B%20color%3A%20%23969896%3B%20%7D%0Acode%20%2Eot%20%7B%20color%3A%20%230086b3%3B%20%7D%0Acode%20%2Eal%20%7B%20color%3A%20%23a61717%3B%20%7D%0Acode%20%2Efu%20%7B%20color%3A%20%2363a35c%3B%20%7D%0Acode%20%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%0Acode%20%2Ewa%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Ecn%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%2Esc%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%2Evs%20%7B%20color%3A%20%23183691%3B%20%7D%0Acode%20%2Ess%20%7B%20color%3A%20%23183691%3B%20%7D%0Acode%20%2Eim%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Eva%20%7Bcolor%3A%20%23008080%3B%20%7D%0Acode%20%2Ecf%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Eop%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Ebu%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Eex%20%7B%20color%3A%20%23000000%3B%20%7D%0Acode%20%2Epp%20%7B%20color%3A%20%23999999%3B%20%7D%0Acode%20%2Eat%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%2Edo%20%7B%20color%3A%20%23969896%3B%20%7D%0Acode%20%2Ean%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%2Ecv%20%7B%20color%3A%20%23008080%3B%20%7D%0Acode%20%2Ein%20%7B%20color%3A%20%23008080%3B%20%7D%0A" rel="stylesheet">
<style>
body {
  box-sizing: border-box;
  min-width: 200px;
  max-width: 980px;
  margin: 0 auto;
  padding: 45px;
  padding-top: 0px;
}
</style>

</head>

<body>

<h1 id="an-exploration-of-the-formula-interface">An exploration of the formula interface</h1>
<p>Pavan Gurazada<br />
January 2018</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)

<span class="kw">data</span>(<span class="st">&quot;mpg&quot;</span>)
<span class="kw">data</span>(<span class="st">&quot;iris&quot;</span>)

<span class="kw">attach</span>(mpg)

<span class="kw">class</span>(fo &lt;-<span class="st"> </span>hwy <span class="op">~</span><span class="st"> </span>class <span class="op">*</span><span class="st"> </span>displ)</code></pre></div>
<pre><code>## [1] &quot;formula&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(fo)</code></pre></div>
<pre><code>## [1] &quot;language&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">terms</span>(fo)</code></pre></div>
<pre><code>## hwy ~ class * displ
## attr(,&quot;variables&quot;)
## list(hwy, class, displ)
## attr(,&quot;factors&quot;)
##       class displ class:displ
## hwy       0     0           0
## class     1     0           1
## displ     0     1           1
## attr(,&quot;term.labels&quot;)
## [1] &quot;class&quot;       &quot;displ&quot;       &quot;class:displ&quot;
## attr(,&quot;order&quot;)
## [1] 1 1 2
## attr(,&quot;intercept&quot;)
## [1] 1
## attr(,&quot;response&quot;)
## [1] 1
## attr(,&quot;.Environment&quot;)
## &lt;environment: R_GlobalEnv&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">model.frame</span>(fo)</code></pre></div>
<pre><code>##     hwy      class displ
## 1    29    compact   1.8
## 2    29    compact   1.8
## 3    31    compact   2.0
## 4    30    compact   2.0
## 5    26    compact   2.8
## 6    26    compact   2.8
## 7    27    compact   3.1
## 8    26    compact   1.8
## 9    25    compact   1.8
## 10   28    compact   2.0
## 11   27    compact   2.0
## 12   25    compact   2.8
## 13   25    compact   2.8
## 14   25    compact   3.1
## 15   25    compact   3.1
## 16   24    midsize   2.8
## 17   25    midsize   3.1
## 18   23    midsize   4.2
## 19   20        suv   5.3
## 20   15        suv   5.3
## 21   20        suv   5.3
## 22   17        suv   5.7
## 23   17        suv   6.0
## 24   26    2seater   5.7
## 25   23    2seater   5.7
## 26   26    2seater   6.2
## 27   25    2seater   6.2
## 28   24    2seater   7.0
## 29   19        suv   5.3
## 30   14        suv   5.3
## 31   15        suv   5.7
## 32   17        suv   6.5
## 33   27    midsize   2.4
## 34   30    midsize   2.4
## 35   26    midsize   3.1
## 36   29    midsize   3.5
## 37   26    midsize   3.6
## 38   24    minivan   2.4
## 39   24    minivan   3.0
## 40   22    minivan   3.3
## 41   22    minivan   3.3
## 42   24    minivan   3.3
## 43   24    minivan   3.3
## 44   17    minivan   3.3
## 45   22    minivan   3.8
## 46   21    minivan   3.8
## 47   23    minivan   3.8
## 48   23    minivan   4.0
## 49   19     pickup   3.7
## 50   18     pickup   3.7
## 51   17     pickup   3.9
## 52   17     pickup   3.9
## 53   19     pickup   4.7
## 54   19     pickup   4.7
## 55   12     pickup   4.7
## 56   17     pickup   5.2
## 57   15     pickup   5.2
## 58   17        suv   3.9
## 59   17        suv   4.7
## 60   12        suv   4.7
## 61   17        suv   4.7
## 62   16        suv   5.2
## 63   18        suv   5.7
## 64   15        suv   5.9
## 65   16     pickup   4.7
## 66   12     pickup   4.7
## 67   17     pickup   4.7
## 68   17     pickup   4.7
## 69   16     pickup   4.7
## 70   12     pickup   4.7
## 71   15     pickup   5.2
## 72   16     pickup   5.2
## 73   17     pickup   5.7
## 74   15     pickup   5.9
## 75   17        suv   4.6
## 76   17        suv   5.4
## 77   18        suv   5.4
## 78   17        suv   4.0
## 79   19        suv   4.0
## 80   17        suv   4.0
## 81   19        suv   4.0
## 82   19        suv   4.6
## 83   17        suv   5.0
## 84   17     pickup   4.2
## 85   17     pickup   4.2
## 86   16     pickup   4.6
## 87   16     pickup   4.6
## 88   17     pickup   4.6
## 89   15     pickup   5.4
## 90   17     pickup   5.4
## 91   26 subcompact   3.8
## 92   25 subcompact   3.8
## 93   26 subcompact   4.0
## 94   24 subcompact   4.0
## 95   21 subcompact   4.6
## 96   22 subcompact   4.6
## 97   23 subcompact   4.6
## 98   22 subcompact   4.6
## 99   20 subcompact   5.4
## 100  33 subcompact   1.6
## 101  32 subcompact   1.6
## 102  32 subcompact   1.6
## 103  29 subcompact   1.6
## 104  32 subcompact   1.6
## 105  34 subcompact   1.8
## 106  36 subcompact   1.8
## 107  36 subcompact   1.8
## 108  29 subcompact   2.0
## 109  26    midsize   2.4
## 110  27    midsize   2.4
## 111  30    midsize   2.4
## 112  31    midsize   2.4
## 113  26    midsize   2.5
## 114  26    midsize   2.5
## 115  28    midsize   3.3
## 116  26 subcompact   2.0
## 117  29 subcompact   2.0
## 118  28 subcompact   2.0
## 119  27 subcompact   2.0
## 120  24 subcompact   2.7
## 121  24 subcompact   2.7
## 122  24 subcompact   2.7
## 123  22        suv   3.0
## 124  19        suv   3.7
## 125  20        suv   4.0
## 126  17        suv   4.7
## 127  12        suv   4.7
## 128  19        suv   4.7
## 129  18        suv   5.7
## 130  14        suv   6.1
## 131  15        suv   4.0
## 132  18        suv   4.2
## 133  18        suv   4.4
## 134  15        suv   4.6
## 135  17        suv   5.4
## 136  16        suv   5.4
## 137  18        suv   5.4
## 138  17        suv   4.0
## 139  19        suv   4.0
## 140  19        suv   4.6
## 141  17        suv   5.0
## 142  29    compact   2.4
## 143  27    compact   2.4
## 144  31    midsize   2.5
## 145  32    midsize   2.5
## 146  27    midsize   3.5
## 147  26    midsize   3.5
## 148  26    midsize   3.0
## 149  25    midsize   3.0
## 150  25    midsize   3.5
## 151  17        suv   3.3
## 152  17        suv   3.3
## 153  20        suv   4.0
## 154  18        suv   5.6
## 155  26    midsize   3.1
## 156  26    midsize   3.8
## 157  27    midsize   3.8
## 158  28    midsize   3.8
## 159  25    midsize   5.3
## 160  25        suv   2.5
## 161  24        suv   2.5
## 162  27        suv   2.5
## 163  25        suv   2.5
## 164  26        suv   2.5
## 165  23        suv   2.5
## 166  26 subcompact   2.2
## 167  26 subcompact   2.2
## 168  26 subcompact   2.5
## 169  26 subcompact   2.5
## 170  25    compact   2.5
## 171  27    compact   2.5
## 172  25    compact   2.5
## 173  27    compact   2.5
## 174  20        suv   2.7
## 175  20        suv   2.7
## 176  19        suv   3.4
## 177  17        suv   3.4
## 178  20        suv   4.0
## 179  17        suv   4.7
## 180  29    midsize   2.2
## 181  27    midsize   2.2
## 182  31    midsize   2.4
## 183  31    midsize   2.4
## 184  26    midsize   3.0
## 185  26    midsize   3.0
## 186  28    midsize   3.5
## 187  27    compact   2.2
## 188  29    compact   2.2
## 189  31    compact   2.4
## 190  31    compact   2.4
## 191  26    compact   3.0
## 192  26    compact   3.0
## 193  27    compact   3.3
## 194  30    compact   1.8
## 195  33    compact   1.8
## 196  35    compact   1.8
## 197  37    compact   1.8
## 198  35    compact   1.8
## 199  15        suv   4.7
## 200  18        suv   5.7
## 201  20     pickup   2.7
## 202  20     pickup   2.7
## 203  22     pickup   2.7
## 204  17     pickup   3.4
## 205  19     pickup   3.4
## 206  18     pickup   4.0
## 207  20     pickup   4.0
## 208  29    compact   2.0
## 209  26    compact   2.0
## 210  29    compact   2.0
## 211  29    compact   2.0
## 212  24    compact   2.8
## 213  44    compact   1.9
## 214  29    compact   2.0
## 215  26    compact   2.0
## 216  29    compact   2.0
## 217  29    compact   2.0
## 218  29    compact   2.5
## 219  29    compact   2.5
## 220  23    compact   2.8
## 221  24    compact   2.8
## 222  44 subcompact   1.9
## 223  41 subcompact   1.9
## 224  29 subcompact   2.0
## 225  26 subcompact   2.0
## 226  28 subcompact   2.5
## 227  29 subcompact   2.5
## 228  29    midsize   1.8
## 229  29    midsize   1.8
## 230  28    midsize   2.0
## 231  29    midsize   2.0
## 232  26    midsize   2.8
## 233  26    midsize   2.8
## 234  26    midsize   3.6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">model.matrix</span>(fo)</code></pre></div>
<pre><code>##     (Intercept) classcompact classmidsize classminivan classpickup
## 1             1            1            0            0           0
## 2             1            1            0            0           0
## 3             1            1            0            0           0
## 4             1            1            0            0           0
## 5             1            1            0            0           0
## 6             1            1            0            0           0
## 7             1            1            0            0           0
## 8             1            1            0            0           0
## 9             1            1            0            0           0
## 10            1            1            0            0           0
## 11            1            1            0            0           0
## 12            1            1            0            0           0
## 13            1            1            0            0           0
## 14            1            1            0            0           0
## 15            1            1            0            0           0
## 16            1            0            1            0           0
## 17            1            0            1            0           0
## 18            1            0            1            0           0
## 19            1            0            0            0           0
## 20            1            0            0            0           0
## 21            1            0            0            0           0
## 22            1            0            0            0           0
## 23            1            0            0            0           0
## 24            1            0            0            0           0
## 25            1            0            0            0           0
## 26            1            0            0            0           0
## 27            1            0            0            0           0
## 28            1            0            0            0           0
## 29            1            0            0            0           0
## 30            1            0            0            0           0
## 31            1            0            0            0           0
## 32            1            0            0            0           0
## 33            1            0            1            0           0
## 34            1            0            1            0           0
## 35            1            0            1            0           0
## 36            1            0            1            0           0
## 37            1            0            1            0           0
## 38            1            0            0            1           0
## 39            1            0            0            1           0
## 40            1            0            0            1           0
## 41            1            0            0            1           0
## 42            1            0            0            1           0
## 43            1            0            0            1           0
## 44            1            0            0            1           0
## 45            1            0            0            1           0
## 46            1            0            0            1           0
## 47            1            0            0            1           0
## 48            1            0            0            1           0
## 49            1            0            0            0           1
## 50            1            0            0            0           1
## 51            1            0            0            0           1
## 52            1            0            0            0           1
## 53            1            0            0            0           1
## 54            1            0            0            0           1
## 55            1            0            0            0           1
## 56            1            0            0            0           1
## 57            1            0            0            0           1
## 58            1            0            0            0           0
## 59            1            0            0            0           0
## 60            1            0            0            0           0
## 61            1            0            0            0           0
## 62            1            0            0            0           0
## 63            1            0            0            0           0
## 64            1            0            0            0           0
## 65            1            0            0            0           1
## 66            1            0            0            0           1
## 67            1            0            0            0           1
## 68            1            0            0            0           1
## 69            1            0            0            0           1
## 70            1            0            0            0           1
## 71            1            0            0            0           1
##     classsubcompact classsuv displ classcompact:displ classmidsize:displ
## 1                 0        0   1.8                1.8                0.0
## 2                 0        0   1.8                1.8                0.0
## 3                 0        0   2.0                2.0                0.0
## 4                 0        0   2.0                2.0                0.0
## 5                 0        0   2.8                2.8                0.0
## 6                 0        0   2.8                2.8                0.0
## 7                 0        0   3.1                3.1                0.0
## 8                 0        0   1.8                1.8                0.0
## 9                 0        0   1.8                1.8                0.0
## 10                0        0   2.0                2.0                0.0
## 11                0        0   2.0                2.0                0.0
## 12                0        0   2.8                2.8                0.0
## 13                0        0   2.8                2.8                0.0
## 14                0        0   3.1                3.1                0.0
## 15                0        0   3.1                3.1                0.0
## 16                0        0   2.8                0.0                2.8
## 17                0        0   3.1                0.0                3.1
## 18                0        0   4.2                0.0                4.2
## 19                0        1   5.3                0.0                0.0
## 20                0        1   5.3                0.0                0.0
## 21                0        1   5.3                0.0                0.0
## 22                0        1   5.7                0.0                0.0
## 23                0        1   6.0                0.0                0.0
## 24                0        0   5.7                0.0                0.0
## 25                0        0   5.7                0.0                0.0
## 26                0        0   6.2                0.0                0.0
## 27                0        0   6.2                0.0                0.0
## 28                0        0   7.0                0.0                0.0
## 29                0        1   5.3                0.0                0.0
## 30                0        1   5.3                0.0                0.0
## 31                0        1   5.7                0.0                0.0
## 32                0        1   6.5                0.0                0.0
## 33                0        0   2.4                0.0                2.4
## 34                0        0   2.4                0.0                2.4
## 35                0        0   3.1                0.0                3.1
## 36                0        0   3.5                0.0                3.5
## 37                0        0   3.6                0.0                3.6
## 38                0        0   2.4                0.0                0.0
## 39                0        0   3.0                0.0                0.0
## 40                0        0   3.3                0.0                0.0
## 41                0        0   3.3                0.0                0.0
## 42                0        0   3.3                0.0                0.0
## 43                0        0   3.3                0.0                0.0
## 44                0        0   3.3                0.0                0.0
## 45                0        0   3.8                0.0                0.0
## 46                0        0   3.8                0.0                0.0
## 47                0        0   3.8                0.0                0.0
## 48                0        0   4.0                0.0                0.0
## 49                0        0   3.7                0.0                0.0
## 50                0        0   3.7                0.0                0.0
## 51                0        0   3.9                0.0                0.0
## 52                0        0   3.9                0.0                0.0
## 53                0        0   4.7                0.0                0.0
## 54                0        0   4.7                0.0                0.0
## 55                0        0   4.7                0.0                0.0
## 56                0        0   5.2                0.0                0.0
## 57                0        0   5.2                0.0                0.0
## 58                0        1   3.9                0.0                0.0
## 59                0        1   4.7                0.0                0.0
## 60                0        1   4.7                0.0                0.0
## 61                0        1   4.7                0.0                0.0
## 62                0        1   5.2                0.0                0.0
## 63                0        1   5.7                0.0                0.0
## 64                0        1   5.9                0.0                0.0
## 65                0        0   4.7                0.0                0.0
## 66                0        0   4.7                0.0                0.0
## 67                0        0   4.7                0.0                0.0
## 68                0        0   4.7                0.0                0.0
## 69                0        0   4.7                0.0                0.0
## 70                0        0   4.7                0.0                0.0
## 71                0        0   5.2                0.0                0.0
##     classminivan:displ classpickup:displ classsubcompact:displ
## 1                  0.0               0.0                   0.0
## 2                  0.0               0.0                   0.0
## 3                  0.0               0.0                   0.0
## 4                  0.0               0.0                   0.0
## 5                  0.0               0.0                   0.0
## 6                  0.0               0.0                   0.0
## 7                  0.0               0.0                   0.0
## 8                  0.0               0.0                   0.0
## 9                  0.0               0.0                   0.0
## 10                 0.0               0.0                   0.0
## 11                 0.0               0.0                   0.0
## 12                 0.0               0.0                   0.0
## 13                 0.0               0.0                   0.0
## 14                 0.0               0.0                   0.0
## 15                 0.0               0.0                   0.0
## 16                 0.0               0.0                   0.0
## 17                 0.0               0.0                   0.0
## 18                 0.0               0.0                   0.0
## 19                 0.0               0.0                   0.0
## 20                 0.0               0.0                   0.0
## 21                 0.0               0.0                   0.0
## 22                 0.0               0.0                   0.0
## 23                 0.0               0.0                   0.0
## 24                 0.0               0.0                   0.0
## 25                 0.0               0.0                   0.0
## 26                 0.0               0.0                   0.0
## 27                 0.0               0.0                   0.0
## 28                 0.0               0.0                   0.0
## 29                 0.0               0.0                   0.0
## 30                 0.0               0.0                   0.0
## 31                 0.0               0.0                   0.0
## 32                 0.0               0.0                   0.0
## 33                 0.0               0.0                   0.0
## 34                 0.0               0.0                   0.0
## 35                 0.0               0.0                   0.0
## 36                 0.0               0.0                   0.0
## 37                 0.0               0.0                   0.0
## 38                 2.4               0.0                   0.0
## 39                 3.0               0.0                   0.0
## 40                 3.3               0.0                   0.0
## 41                 3.3               0.0                   0.0
## 42                 3.3               0.0                   0.0
## 43                 3.3               0.0                   0.0
## 44                 3.3               0.0                   0.0
## 45                 3.8               0.0                   0.0
## 46                 3.8               0.0                   0.0
## 47                 3.8               0.0                   0.0
## 48                 4.0               0.0                   0.0
## 49                 0.0               3.7                   0.0
## 50                 0.0               3.7                   0.0
## 51                 0.0               3.9                   0.0
## 52                 0.0               3.9                   0.0
## 53                 0.0               4.7                   0.0
## 54                 0.0               4.7                   0.0
## 55                 0.0               4.7                   0.0
## 56                 0.0               5.2                   0.0
## 57                 0.0               5.2                   0.0
## 58                 0.0               0.0                   0.0
## 59                 0.0               0.0                   0.0
## 60                 0.0               0.0                   0.0
## 61                 0.0               0.0                   0.0
## 62                 0.0               0.0                   0.0
## 63                 0.0               0.0                   0.0
## 64                 0.0               0.0                   0.0
## 65                 0.0               4.7                   0.0
## 66                 0.0               4.7                   0.0
## 67                 0.0               4.7                   0.0
## 68                 0.0               4.7                   0.0
## 69                 0.0               4.7                   0.0
## 70                 0.0               4.7                   0.0
## 71                 0.0               5.2                   0.0
##     classsuv:displ
## 1              0.0
## 2              0.0
## 3              0.0
## 4              0.0
## 5              0.0
## 6              0.0
## 7              0.0
## 8              0.0
## 9              0.0
## 10             0.0
## 11             0.0
## 12             0.0
## 13             0.0
## 14             0.0
## 15             0.0
## 16             0.0
## 17             0.0
## 18             0.0
## 19             5.3
## 20             5.3
## 21             5.3
## 22             5.7
## 23             6.0
## 24             0.0
## 25             0.0
## 26             0.0
## 27             0.0
## 28             0.0
## 29             5.3
## 30             5.3
## 31             5.7
## 32             6.5
## 33             0.0
## 34             0.0
## 35             0.0
## 36             0.0
## 37             0.0
## 38             0.0
## 39             0.0
## 40             0.0
## 41             0.0
## 42             0.0
## 43             0.0
## 44             0.0
## 45             0.0
## 46             0.0
## 47             0.0
## 48             0.0
## 49             0.0
## 50             0.0
## 51             0.0
## 52             0.0
## 53             0.0
## 54             0.0
## 55             0.0
## 56             0.0
## 57             0.0
## 58             3.9
## 59             4.7
## 60             4.7
## 61             4.7
## 62             5.2
## 63             5.7
## 64             5.9
## 65             0.0
## 66             0.0
## 67             0.0
## 68             0.0
## 69             0.0
## 70             0.0
## 71             0.0
##  [ reached getOption(&quot;max.print&quot;) -- omitted 163 rows ]
## attr(,&quot;assign&quot;)
##  [1] 0 1 1 1 1 1 1 2 3 3 3 3 3 3
## attr(,&quot;contrasts&quot;)
## attr(,&quot;contrasts&quot;)$class
## [1] &quot;contr.treatment&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">detach</span>(mpg)</code></pre></div>
<p>Heavily annotated from the following sources <a href="https://rviews.rstudio.com/2017/02/01/the-r-formula-method-the-good-parts/" class="uri">https://rviews.rstudio.com/2017/02/01/the-r-formula-method-the-good-parts/</a> <a href="https://cran.r-project.org/web/packages/lazyeval/vignettes/lazyeval.html" class="uri">https://cran.r-project.org/web/packages/lazyeval/vignettes/lazyeval.html</a> <a href="http://rmhogervorst.nl/cleancode/blog/2016/06/13/NSE_standard_evaluation_dplyr.html" class="uri">http://rmhogervorst.nl/cleancode/blog/2016/06/13/NSE_standard_evaluation_dplyr.html</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod1 &lt;-<span class="st"> </span><span class="kw">lm</span>(Sepal.Width <span class="op">~</span><span class="st"> </span>Petal.Width <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(Petal.Length) <span class="op">+</span><span class="st"> </span>Species,
           <span class="dt">data =</span> iris,
           <span class="dt">subset =</span> Sepal.Length <span class="op">&gt;</span><span class="st"> </span><span class="fl">4.6</span>)</code></pre></div>
<p>The following code extracts the relevant columns and rows specified in the formula and places them in a dataframe</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">model.frame</span>(mod1) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</code></pre></div>
<pre><code>##   Sepal.Width Petal.Width log(Petal.Length) Species
## 1         3.5         0.2         0.3364722  setosa
## 2         3.0         0.2         0.3364722  setosa
## 3         3.2         0.2         0.2623643  setosa
## 5         3.6         0.2         0.3364722  setosa
## 6         3.9         0.4         0.5306283  setosa
## 8         3.4         0.2         0.4054651  setosa</code></pre>
<p>The formula interface represents the symbolic model, as well as the design ' matrix (<code>X</code>). Here, <code>y = Sepal.Width</code> and <code>X</code> has the columns <code>Petal.Width</code>, <code>log(Petal.Length)</code> and <code>Species</code>. The rows from the data set to be used is also specified.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(iris<span class="op">$</span>Species)</code></pre></div>
<pre><code>##  Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">model.matrix</span>(mod1) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>() </code></pre></div>
<pre><code>##   (Intercept) Petal.Width log(Petal.Length) Speciesversicolor
## 1           1         0.2         0.3364722                 0
## 2           1         0.2         0.3364722                 0
## 3           1         0.2         0.2623643                 0
## 5           1         0.2         0.3364722                 0
## 6           1         0.4         0.5306283                 0
## 8           1         0.2         0.4054651                 0
##   Speciesvirginica
## 1                0
## 2                0
## 3                0
## 5                0
## 6                0
## 8                0</code></pre>
<p>As can be seen above, there are three factor levels, so 2 dummy variables need to be automagically created. The underlying matrix is always accessible. Note the absence of the outcome variable ' The model matrix approach is widely used within the scikit-learn family, but R has this rather convenient formula interface which allows a symbolic model to be expressed directly in code. Formulas are employed in R beyond statistical model specifications (e.g., in <code>dplyr</code>)</p>
<p>There are three parts to a formula - the tilde(<code>~</code>), expression to the left of <code>~</code> (usually the response) and the expression to the right of <code>~</code> (usually the predictors).</p>
<p><code>~</code> is an operator and hence is a shortcut to a function just as <code>+</code>, <code>-</code></p>
<p>So, the following code is valid:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="st">`</span><span class="dt">~</span><span class="st">`</span>(lhs, rhs)</code></pre></div>
<pre><code>## lhs ~ rhs</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#`+`(lhs, rhs) does not work</span>
<span class="st">`</span><span class="dt">+</span><span class="st">`</span>(<span class="dv">1</span>, <span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>These three function evaluations exemplify the nature of <code>~</code>. It parses the arguments but does not evaluate them, unlike <code>+</code>. This is an entry point to the world of metaprogramming, where the unevaluated code is processed in a specific way before evaluation so that the user can enjoy the benefit of a human-parseable interface. In sum, formulas capture an enevaluated expression and the context in which the expression was created.</p>
<p>These facets of the formula object are explored below:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myFormula &lt;-<span class="st"> </span>Sepal.Width <span class="op">~</span><span class="st"> </span>Petal.Width <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(Petal.Length) <span class="op">+</span><span class="st"> </span>Species
<span class="kw">str</span>(myFormula)</code></pre></div>
<pre><code>## Class 'formula'  language Sepal.Width ~ Petal.Width + log(Petal.Length) + Species
##   ..- attr(*, &quot;.Environment&quot;)=&lt;environment: R_GlobalEnv&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myFormula[[<span class="dv">1</span>]] <span class="co"># ~</span></code></pre></div>
<pre><code>## `~`</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myFormula[[<span class="dv">2</span>]] <span class="co"># lhs</span></code></pre></div>
<pre><code>## Sepal.Width</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myFormula[[<span class="dv">3</span>]] <span class="co"># rhs</span></code></pre></div>
<pre><code>## Petal.Width + log(Petal.Length) + Species</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(myFormula)</code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>By using a formula evaluation can be delayed, and since the context is captured it evaluates properly even in a different place However, someone has to parse and evaluate the formula object some place!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">1</span>
add_<span class="dv">100</span> &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
  <span class="op">~</span><span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">100</span>
}

<span class="kw">add_100</span>(<span class="dv">2</span>)</code></pre></div>
<pre><code>## ~x + 100
## &lt;environment: 0x000000001eda9160&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">eval</span>(<span class="kw">add_100</span>(<span class="dv">2</span>))</code></pre></div>
<pre><code>## ~x + 100
## &lt;environment: 0x000000001ecf0630&gt;</code></pre>

</body>
</html>
